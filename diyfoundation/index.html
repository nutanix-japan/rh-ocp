<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-diyfoundation/diyfoundation">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Foundation | Openshift on Nutanix</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://github.com/rh-ocp/diyfoundation/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Foundation | Openshift on Nutanix"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/rh-ocp/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://github.com/rh-ocp/diyfoundation/"><link data-rh="true" rel="alternate" href="https://github.com/rh-ocp/diyfoundation/" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/rh-ocp/diyfoundation/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rh-ocp/blog/rss.xml" title="Openshift on Nutanix RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rh-ocp/blog/atom.xml" title="Openshift on Nutanix Atom Feed"><link rel="stylesheet" href="/rh-ocp/assets/css/styles.1a93153e.css">
<link rel="preload" href="/rh-ocp/assets/js/runtime~main.2c1a7808.js" as="script">
<link rel="preload" href="/rh-ocp/assets/js/main.cbacd9a6.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rh-ocp/"><div class="navbar__logo"><img src="/rh-ocp/img/logo.svg" alt="OCP on Nutanix" class="themedImage_ToTc themedImage--light_HNdA"><img src="/rh-ocp/img/logo.svg" alt="OCP on Nutanix" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">OCP on Nutanix</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/nutanix-japan/rh-ocp" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rh-ocp/">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/rh-ocp/diyfoundation/">Foundation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rh-ocp/pcdeploy/">PC Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rh-ocp/ocp_ntnx_hci/ocp_csi">Deploy Nutanix CSI for OCP</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rh-ocp/ocp_ipi_install/ocp_ipi_intro">Nutanix IPI Installation</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rh-ocp/ocp_ndb/">OCP and Nutanix NDB</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rh-ocp/toolsvms/linux_tools_vm">Tools VMs</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rh-ocp/instructor/">Preparation for Instructor</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rh-ocp/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Foundation</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Nutanix Foundation</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">â€‹</a></h2><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Estimated time to complete: <strong>60 Minutes</strong></p></div></div><p>Foundation is used to automate the installation of the hypervisor and
Controller VM on one or more nodes. In this exercise you will practice
imaging a physical cluster with Foundation. In order to keep the lab
self-contained, you will create a single node cluster on which you
will deploy your Foundation VM. That Foundation instance will be used to
image and create a cluster from the remaining 3 nodes in the Block.</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>In following steps, you should replace xx part of the IP octet with your assigned cluster ID</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pre-requisites">Pre-requisites<a class="hash-link" href="#pre-requisites" title="Direct link to heading">â€‹</a></h2><p>Your instructor will provide you the following details: collect all these details and note them down somewhere before beginning your lab. </p><ul class="contains-task-list containsTaskList_mC6p"><li><p>Your 4 node cluster details:</p><ul class="contains-task-list containsTaskList_mC6p"><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->4 x CVM IP addresses </li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->4 x Host IP addresses</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->4 x IPMI IP addresses</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Credentials to access CVM </li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Credentials to access IPMI</li></ul></li><li class="task-list-item"><p><input type="checkbox" disabled=""> <!-- -->1 x Foundation VM IP address</p></li><li class="task-list-item"><p><input type="checkbox" disabled=""> <!-- -->Credentials to access to Foundation VM (ssh and Web UI)</p></li><li class="task-list-item"><p><input type="checkbox" disabled=""> <!-- -->Credentials for your cluster access</p></li><li class="task-list-item"><p><input type="checkbox" disabled=""> <!-- -->DNS IP Addresses</p></li><li class="task-list-item"><p><input type="checkbox" disabled=""> <!-- -->public NTP hostnames </p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="diy-environment">DIY Environment<a class="hash-link" href="#diy-environment" title="Direct link to heading">â€‹</a></h2><p>Your instructor(s) has reserved the following for your use:</p><ul><li>A 4 node Nutanix Hosted POC (HPOC) cluster for you</li><li>A Foundation VM </li></ul><p>To get an understanding of the Foundation process, you will:</p><ul><li>Destroy the existing 4 node cluster </li><li>Confirm the number of SSDs in your 4 node HPOC cluster </li><li>Connect to a provisioned Foundation VM (using ssh and Web UI)</li><li>Initiate Foundation process of the 4 node cluster </li><li>Manually create the cluster using <code>cluster create</code> command</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="destroy-existing-4-node-cluster">Destroy Existing 4 Node Cluster<a class="hash-link" href="#destroy-existing-4-node-cluster" title="Direct link to heading">â€‹</a></h2><p>The 4 node cluster that your instructor has provisioned for you is running a Nutanix cluster and all associated services. Since some cluster services (if present) may hinder new cluster deployment, we will destroy the existing cluster.</p><p>Using an SSH client, connect to any <strong>CVM IP</strong> <code>10.42.xx.32</code> in your assigned block using the following credentials: </p><ul><li><strong>Username</strong> - nutanix</li><li><strong>Password</strong> - <em>check password with your instructor</em></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Login to the console of a CVM</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> -l nutanix </span><span class="token number" style="color:#36acaa">10.42</span><span class="token plain">.xx.32         </span><span class="token comment" style="color:#999988;font-style:italic"># password: &lt;check password in RX&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Execute the following commands to power off any running VMs on the cluster, stop cluster services, and destroy the existing cluster:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cluster stop        </span><span class="token comment" style="color:#999988;font-style:italic"># Enter &#x27;I agree&#x27; when prompted to proceed</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cluster destroy     </span><span class="token comment" style="color:#999988;font-style:italic"># Enter &#x27;Y&#x27; when prompted to proceed</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you have made sure that all VMs and services are stopped, you can proceed to the next steps.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="confirm-the-number-of-ssds">Confirm the Number of SSDs<a class="hash-link" href="#confirm-the-number-of-ssds" title="Direct link to heading">â€‹</a></h2><p>In this section we will confirm the number of SSDs in your node D. This will determine which command (to create a new Nutanix cluster) we will use in the next section. Based on the output of the following commands, we will determine whether we will use Replication Factor (RF) 1 or RF2. </p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Replication factor(RF) and Number of SSDs</div><div class="admonitionContent_S0QG"><p>Nutanix HCI software mandates requirement of 2 SSDs on a hardware node to persist data on disk for RF2. </p><ul><li><strong>RF3</strong> - three copies of data on different nodes</li><li><strong>RF2</strong> - two copies of data on different nodes</li><li><strong>RF1</strong> - one copy of data on disk</li></ul><p>For more information on RF check <a href="https://www.nutanixbible.com/4c-book-of-aos-dsf.html" target="_blank" rel="noopener noreferrer">here</a>.</p></div></div><p>Login to the CVM to find out the SSD configuration details</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Login to the console of  NodeD CVM</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> -l nutanix </span><span class="token number" style="color:#36acaa">10.42</span><span class="token plain">.xx.32         </span><span class="token comment" style="color:#999988;font-style:italic"># password: &lt;check password in RX&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">lsscsi </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Example output with 1 SSD here</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:0:0:0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">    disk    ATA      INTEL SSDSC2BX80 0140  /dev/sda  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;&lt; SSD 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:0:1:0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">    disk    ATA      INTEL SSDSC2BX80 0140  /dev/sdb  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;&lt; SSD 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:0:2:0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">    disk    ATA      ST91000640NS     SN03  /dev/sdc </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:0:3:0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">    disk    ATA      ST91000640NS     SN03  /dev/sdd </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:0:4:0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">    disk    ATA      ST91000640NS     SN03  /dev/sde </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:0:5:0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">    disk    ATA      ST91000640NS     SN03  /dev/sdf </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">:0:0:0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">    cd/dvd  QEMU     QEMU DVD-ROM     </span><span class="token number" style="color:#36acaa">2.5</span><span class="token plain">+  /dev/sr0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Example output with 2 SSDs here</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:0:0:0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">    disk    ATA      INTEL SSDSC2BX80 0140  /dev/sda  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;&lt; SSD 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:0:2:0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">    disk    ATA      ST91000640NS     SN03  /dev/sdc </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:0:3:0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">    disk    ATA      ST91000640NS     SN03  /dev/sdd </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:0:4:0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">    disk    ATA      ST91000640NS     SN03  /dev/sde </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:0:5:0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">    disk    ATA      ST91000640NS     SN03  /dev/sdf </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">:0:0:0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">    cd/dvd  QEMU     QEMU DVD-ROM     </span><span class="token number" style="color:#36acaa">2.5</span><span class="token plain">+  /dev/sr0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p> After confirming the number of SSDs choose the appropriate choices for cluster configuration during the Foundation process. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="foundation-your-nutanix-cluster">Foundation your Nutanix Cluster<a class="hash-link" href="#foundation-your-nutanix-cluster" title="Direct link to heading">â€‹</a></h2><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>We will do this section of the lab from your remote VDI (Windows) computer. This is the fastest way as remote consoles will be slow.</p></div></div><p>By default, Foundation does not have any AOS or hypervisor images. You can download your desired AOS package from the <a href="https://portal.nutanix.com/#/page/releases/nosDetails" target="_blank" rel="noopener noreferrer">Nutanix Portal</a>.</p><p>If downloading the AOS package within the Foundation VM, the <code>.tar.gz</code> package can also be moved to <code>~/foundation/nos</code> rather than uploaded to Foundation through the web UI.</p><p>To shorten the lab time, we use command line to access foundation VM and download NOS binary to designated folder in it.</p><ol><li><p>Open a terminal in your VDI (Putty) and ssh to <strong>Foundation VM</strong> through foundation IP <code>10.42.xx.45</code></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Login to the console of Foundation VM</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> -l nutanix </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Foundation VM IP</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># provide default password for nutanix user </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># when in doubt ask your instructor for login credentials</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ssh -l nutanix 10.42.xx.51     </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> foundation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> nos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -O http://10.42.194.11/workshop_staging/AOS%206.5%20LTS/nutanix_installer_package-release-fraser-6.5-stable-c1cb24df40aaa4aa848f84003a27af28cc058e58-x86_64.tar.gz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>Make sure you see <strong>100%</strong> finished status to confirm that AOS 6.5 package has been downloaded to <code>~/foundation/nos</code> folder.</p></div></div></li><li><p>From you VDI computer, open Google Chrome browser</p></li><li><p>Access Foundation UI via any browser at <code>http://&lt;Foundation VM IP&gt;</code></p><p><strong>Cancel</strong> any prompts to upgrade Foundation software.</p></li><li><p>Fill the following fields (with data you have noted in the beginning): </p><ul><li><strong>Select your hardware platform</strong>: Nutanix</li><li><strong>Netmask of Every Host and CVM</strong> - 255.255.255.128</li><li><strong>Gateway of Every Host and CVM</strong> - 10.42.xx.1 (The <strong>xx</strong> octet will be specific to your cluster)</li><li><strong>Gateway of Every IPMI</strong> - 10.42.xx.1 (The <strong>xx</strong> octet will be specific to your cluster)</li><li><strong>Netmask of Every IPMI</strong> - 255.255.255.128</li><li>Under <strong>Double-check this installer&#x27;s networking step</strong></li><li><strong>Skip this Validation</strong> - selected</li></ul><p><img loading="lazy" alt="image" src="/rh-ocp/assets/images/image014-2b761787eb943054ca592869122ebe33.png" width="619" height="798" class="img_ev3q"></p></li><li><p>Click on <strong>Next</strong> at the bottom of the page</p></li><li><p>In new foundation page, Tools menu choose <strong>Remove Unselected Rows</strong> to clear all auto discovered nodes (if there are any)</p><p><img loading="lazy" alt="image" src="/rh-ocp/assets/images/remove-nodes-4e443361f384082ed209e3b17eb87145.png" width="992" height="332" class="img_ev3q"></p></li><li><p>Click <strong>Add nodes manually</strong></p><p><img loading="lazy" alt="image" src="/rh-ocp/assets/images/image0141-b7df8c5e981fdfd6bae43ed90429f754.png" width="981" height="186" class="img_ev3q"></p></li><li><p>Fill in block information, fill in the following information:</p><ul><li><strong>Number of blocks</strong> - 1</li><li><strong>Number of nodes</strong> - 4</li><li><strong>How should these nodes be reached?</strong> - choose <strong>I have configured their IPMIs to my desireed IP addresses</strong></li></ul></li><li><p>Click <strong>Add</strong></p><p><img loading="lazy" alt="image" src="/rh-ocp/assets/images/image104-275fd5770ffac3181df5c57cc4ccfd89.png" width="832" height="1026" class="img_ev3q"></p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Foundation will automatically communicate with the IPMI over the routed IP network and get information to do the installation. </p><p>There is also an option to connect to IPMIs using the MAC (hardware) address when you have connectivity to the physical network. But in this lab, we will be using IP addresses as we are in a routed network. </p></div></div></li><li><p>Click <strong>Tools</strong> and select <strong>Range Autofill</strong> from the drop down list</p></li><li><p>Replacing the octet(s) that correspond to your HPOC network, fill out the <strong>top row</strong> fields with the following details: this will automatically populate the IP addresses in the node rows.</p><ul><li><strong>IPMI IP</strong> - 10.42.xx.33</li><li><strong>Hypervisor IP</strong> - 10.42.xx.25</li><li><strong>CVM IP</strong> - 10.42.xx.29</li><li><strong>HOSTNAME OF HOST</strong> -- POCxx-1</li></ul><p><img loading="lazy" alt="image" src="/rh-ocp/assets/images/image105-562bae0689d5d86fe611c554d004dc94.png" width="1918" height="572" class="img_ev3q"></p></li><li><p>Click <strong>Next</strong></p></li><li><p>In the <strong>Cluster</strong> page, select <strong>Skip automatic cluster formation (e.g. you will use command-line)</strong></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>We need to skip cluster creation at this time as we will be using command line to do this. </p><p>This allows us to configure our cluster with RF2 or RF1 based on the number of SSDs in the nodes which you determined in this <a href="/rh-ocp/diyfoundation/#confirm-the-number-of-ssds">step</a>.</p></div></div><p><img loading="lazy" src="/rh-ocp/assets/images/skip_cluster_check-14890b3bc886fc0ab3254d00b17571b5.png" width="557" height="215" class="img_ev3q"></p></li><li><p>Click <strong>Next</strong></p><ul><li><strong>Select an AOS installer</strong> - Select your uploaded (through
command line in previous steps)
<em>nutanix_installer_package-release-<!-- -->*<!-- -->.tar.gz</em> file</li><li><strong>Arguments to the AOS Installer (Optional)</strong> - leave blank</li></ul><p><img loading="lazy" alt="image" src="/rh-ocp/assets/images/image106-2607395ba1624e87a18309588999ba44.png" width="675" height="329" class="img_ev3q"></p></li><li><p>Click <strong>Next</strong></p></li><li><p>Fill out the following fields and click <strong>Next</strong>:</p><ul><li><strong>Select a hypervisor installer</strong> - AHV, AHV installer bundled inside the AOS installer</li></ul><p><img loading="lazy" alt="image" src="/rh-ocp/assets/images/image020-dbae9f547fb654a4afe216e34550c743.png" width="667" height="229" class="img_ev3q"></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Every AOS release contains a version of AHV bundle with that release. However, other hypervisor binaries will need to uploaded invidually.</p></div></div></li><li><p>Click <strong>Next</strong></p></li><li><p>Enter the existing IPMI credentials as <strong>ADMIN</strong> and <strong>ADMIN</strong> for all three nodes. Note that this will be different in the field.</p><p><img loading="lazy" alt="image" src="/rh-ocp/assets/images/ipmi_creds-7666875b9485331a854bc3a77dc372fd.png" width="660" height="282" class="img_ev3q"></p></li><li><p>Click <strong>Start</strong></p></li><li><p>Confirm that the installer will be active by clicking on <strong>Won&#x27;t Sleep</strong></p><p><img loading="lazy" alt="image" src="/rh-ocp/assets/images/image021-confirm-2821dd4bb240aaa34e9b03b5e8081f6b.png" width="310" height="142" class="img_ev3q"></p></li><li><p>In the <strong>Warning of Data Loss Possibility</strong> window, click on <strong>Ignore and Re-image</strong></p><p><img loading="lazy" alt="image" src="/rh-ocp/assets/images/ignore_warning-21adb47e62ec3e64ddc1920fc882eb42.png" width="333" height="318" class="img_ev3q"></p><p>Foundation will run a couple of tests to make sure all the configuration details you have provided are correct and then direct you the installation progress page.</p></li><li><p>Click the <strong>Log</strong> link to view the realtime log output from your node.</p><p><img loading="lazy" alt="image" src="/rh-ocp/assets/images/foundation-progress-2fca612354f4a2960b83d33780c66949.png" width="973" height="383" class="img_ev3q"></p></li><li><p>Monitor the foundation process until completion</p><p><img loading="lazy" alt="image" src="/rh-ocp/assets/images/foundation-success-b3f6663f86112f924327a5ef324c47e3.png" width="976" height="379" class="img_ev3q"></p></li><li><p>Once Foundation finishes successfully, logon to any CVM using putty/terminal and execute the following commands to create a cluster </p><ul><li><strong>Username</strong> - nutanix</li><li><strong>Password</strong> - collected from your instructor</li></ul><p>If you have at least <strong>2 SSDs</strong> in each of your nodes: </p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">2 SSDs</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Sample command</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cluster -s IP_CVM1,IP_CVM2,IP_CVM3,IP_CVM4 create  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cluster -s 10.42.20.29,10.42.20.30,10.42.20.31,10.42.20.32 create</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>If you have <strong>1 SSD</strong> in each of your nodes: </p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">1 SSD</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Sample command</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cluster -s IP_CVM1,IP_CVM2,IP_CVM3,IP_CVM4 --redundancy_factor=1 create  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cluster -s 10.42.20.29,10.42.20.30,10.42.20.31,10.42.20.32 --redundancy_factor=1 create</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div></li></ol><ol start="24"><li><p>Make sure the command finishes and successfully creates a cluster. Contact your instructor for troubleshooting help if anything were to fail.</p></li><li><p>Once the cluster create step finishes, we need to configure our cluster so we can access it. Execute the following steps in sequence inside the CVM:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Use the same cluster password as your cluster reservation</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ncli user reset-password user-name=admin password=XXXXXX</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ncli cluster set-timezone timezone=UTC</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Use the same cluster name as your cluster reservation </div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ncli cluster edit-params new-name=POC0xx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ncli cluster add-to-name-servers servers=10.42.194.10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ncli cluster add-to-ntp-servers servers=0.pool.ntp.org,1.pool.ntp.org,2.pool.ntp.org</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ncli cluster set-external-ip-address external-ip-address=10.42.xx.37 </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>To access your cluster&#x27;s GUI, browse to <code>https://&lt;Cluster Virtual IP&gt;:9440</code> (10.42.xx.37)in your browser</p></li><li><p>Log in with the following credentials:</p><ul><li><strong>Username</strong> - admin</li><li><strong>Password</strong> - password from previous cluster creation step</li></ul><p><img loading="lazy" alt="image" src="/rh-ocp/assets/images/image024-b1428caf3c1f5b91cddcb67ab5ffc453.png" width="650" height="364" class="img_ev3q"></p></li></ol><p>You have now successfully prepared your Nutanix cluster and it is now ready to host workloads. </p><p>In the next section we will deploy Prism Central VM which will be used to provide infrastructure services on your cluster.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/nutanix-japan/rh-ocp/edit/main/docs/diyfoundation/diyfoundation.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-05-11T15:00:22.000Z">May 11, 2023</time></b> by <b>Nutanix Japan</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/rh-ocp/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Getting Started</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rh-ocp/pcdeploy/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">PC Deployment</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#pre-requisites" class="table-of-contents__link toc-highlight">Pre-requisites</a></li><li><a href="#diy-environment" class="table-of-contents__link toc-highlight">DIY Environment</a></li><li><a href="#destroy-existing-4-node-cluster" class="table-of-contents__link toc-highlight">Destroy Existing 4 Node Cluster</a></li><li><a href="#confirm-the-number-of-ssds" class="table-of-contents__link toc-highlight">Confirm the Number of SSDs</a></li><li><a href="#foundation-your-nutanix-cluster" class="table-of-contents__link toc-highlight">Foundation your Nutanix Cluster</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Nutanix, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/rh-ocp/assets/js/runtime~main.2c1a7808.js"></script>
<script src="/rh-ocp/assets/js/main.cbacd9a6.js"></script>
</body>
</html>